<!DOCTYPE html>
<html lang="ru">
<head>
  <title>Электронное учебное пособие Соадминистрирование баз данных и серверов</title>
  <meta charset="UTF-8">
  <link rel="stylesheet" href="css/style.css">
  <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
  <link rel="icon" href="favicon.ico" type="image/x-icon">
</head>
<body>


  <header class="header">
    <div class="container">
      <div class="header__inner">
        <div class="header__logo">
         <img src="images/logotype-active.png" width="100px" alt="">
         <div class="name">
           <h2>Электронное учебное пособие</h2>
           <h2>Соадминистрирование баз данных и серверов</h2>
         </div>
         <a id="top"></a>
        </div>
        <nav class="nav">
          <a class="nav__link" href="index.html">Учебник</a>
          <a class="nav__link" href="basepr.html">Практика</a>
          <a class="nav__link" href="video1.html">Видео материал</a>
        </nav>
      </div>
    </div>
  </header>
<div class="layout">
  <aside class="aside-menu">
    <div class="block" id="block-htmlbook-block-28"><div class="block-content"></div></div>
    <div class="block" id="block-htmlbook-book-navigation">
       <h2 class="block-title">Содержание</h2>
     <div class="block-content">
  <ul class="menu">
                 <li class="leaf-collapsed">

                 <a class="not-active" href="index.html">Раздел 1. Технологии администрирования серверов и баз данных</a>
                    </li>
                    <li class="leaf-collapsed">

                 <a class="not-active">Тема 1.1. Принципы построения и администрирования баз данных
                        </a>
                       </li>
                         <div class="sub-menu">
                           <li class="leaf-collapsed">

                     <a class="not-active" href="book111.html">1.Обязанности администратора баз данных. Основные утилиты администратора баз данных. Режимы запуска и останова базы данных.</a>
                           </li>

     	      <li class="leaf-collapsed">

         <a class="not-active" href="book112.html">2.Пользователи базы данных. Привилегии, назначение привилегий. Управление пользователями баз данных</a>
               </li>
               <li class="leaf-collapsed">

         <a class="not-active" href="book113.html">3.Табличные пространства и файлы данных. Модели и типы данных.</a>
               </li>
     	      <li class="leaf-collapsed">

         <a class="not-active" href="book114.html">4.Схемы и объекты схемы данных. Блоки данных, экстенты сегменты.</a>
               </li>
     	      <li class="leaf-collapsed">

         <a class="not-active" href="book115.html">5.Структуры памяти. Однопроцессорные и многопроцессорные базы данных</a>
               </li>
     	      <li class="leaf-collapsed">

         <a class="not-active" href="book116.html">6.Транзакции, блокировки и согласованность данных</a>
               </li>
     	      <li class="leaf-collapsed">

         <a class="not-active" href="book117.html">7.Журнал базы данных: структура и назначение файлов журнала, управление переключениями и контрольными точками</a>
               </li>
     	      <li class="leaf-collapsed">

         <a class="not-active" href="book118.html">8. Словарь данных: назначение, структура, префиксы </a>
               </li>
     	      <li class="leaf-collapsed">

         <a class="not-active" href="book119.html">9. Правила Дейта</a>
               </li>
             </div>

     	      <li class="leaf-collapsed">

         <a class="not-active">Тема 1.2. Серверы баз данных</a>
               </li>

               <div class="sub-menu">

     	      <li class="leaf-collapsed">


         <a class="not-active" href="book121.html">1.Понятие сервера. Классификация серверов. Принципы разделения между клиентскими и серверными частями. Типовое разделение функций</a>
               </li>
     	      <li class="leaf-collapsed">

         <a class="not-active" href="book122.html">2.Протоколы удаленного вызова процедур. Требования к аппаратным возможностям и базовому программному обеспечению клиентов и серверов</a>
               </li>
     	      <li class="leaf-collapsed">
         <a class="not-active" href="book123.html">3.Хранимые процедуры и триггеры</a>
               </li>
     	      <li class="leaf-collapsed">

         <a class="not-active" href="book124.html">4.Характеристики серверов баз данных. Механизмы доступа к базам данных</a>
               </li>
               <li class="leaf-collapsed">
              <a class="not-active" href="book125.html">5. Аппаратное обеспечение. Для квалификации «Администратор баз данных»: Развертывание серверов баз данных</a>
                  </li>
                  <li class="leaf-collapsed">
                 <a class="not-active" href="book126.html">6. Банк данных: состав, схема</a>
                     </li>
             </div>
             <li class="leaf-collapsed">
          <a class="not-active">Тема 1.3.Администрирование баз данных и серверов</a>
                </li>
     <div class="sub-menu">
      <li class="leaf-collapsed">
      <a class="not-active" href="book131.html">1.Технология установки и настройка сервера MySQL в операционной системе Windows.Клиентские настhойки, протоколирование, безопасность</a>
         </li>
         <li class="leaf-collapsed">
      <a class="not-active" href="book132.html">2.Технология установки и настройка сервера MySQL в операционных системах Linux</a>
            </li>
            <li class="leaf-collapsed">
         <a class="not-active" href="book133.html">3.Удаленное администрирование</a>
               </li>
               <li class="leaf-collapsed">
            <a class="not-active" href="book134.html">4.Аудит базы данных. Аудиторский журнал. Установка опций, включение и отключение аудита. Очистка и уменьшение размеров журнала</a>
                  </li>
                  <li class="leaf-collapsed">
               <a class="not-active" href="book135.html">5.Технологии создания базы данных с применением языка SQL.Добавление, удаление данных и таблиц</a>
                     </li>
                     <li class="leaf-collapsed">
                  <a class="not-active" href="book136.html">6.Создание запросов, процедур и триггеров. Для квалификации «Администратор баз данных». Создание запросов и процедур на изменение структуры базы данных</a>
                        </li>
                        <li class="leaf-collapsed">
                     <a class="not-active" href="book137.html">7.Динамический SQL и его операторы.</a>
                           </li>
                           <li class="leaf-collapsed">
                        <a class="not-active" href="book138.html">8.Особенности обработки данных в объектно-ориентированных базах данных</a>
                              </li>
                              <li class="leaf-collapsed">
                           <a class="not-active" href="book139.html">9. Инструменты мониторинга нагрузки сервера</a>
                                 </li>

    </div>
    <li class="leaf-collapsed">
    <a class="not-active" href="index.html">Раздел 2. Обеспечение качества и сертификация информационных систем </a>
       </li>
       <li class="leaf-collapsed">
     <a class="not-active">Тема 2.1. Защитаи сохранность информации баз данных</a>
          </li>
     <div class="sub-menu">
          <li class="leaf-collapsed">
        <a class="not-active" href="book211.html">1.Законодательство Российской Федерации в области защиты информации. Требования безопасности к серверам баз данных. Классы защиты</a>
             </li>
             <li class="leaf-collapsed">
           <a class="not-active" href="book212.html">2.Основные группы методов противодействия угрозам безопасности в корпоративных сетях</a>
                </li>
                <li class="leaf-collapsed">
             <a class="not-active" href="book213.html">3.Программно-аппаратные методы защиты процесса обработки и передачи информации. Политика безопасности, настройка политики безопасности</a>
                   </li>
                   <li class="leaf-collapsed">
                <a class="not-active" href="book214.html">4.Виды неисправностей систем хранения данных</a>
                      </li>
                      <li class="leaf_active-trail">
               <a href="book215.html" class="is-active">5.Резервное копирование: цели, методы, концепции, планирование, роль журнала транзакций. Виды резервных копий
                      <span class="pointer" style="border-width: 11px 6px;"></span></a>
                     </li>

                         <li class="leaf-collapsed">
                      <a class="not-active" href="book216.html">6.Утилиты резервного копирования </a>
                            </li>
                            <li class="leaf-collapsed">
                         <a class="not-active" href="book217.html">7.Восстановление базы данных: основные алгоритмы и этапы</a>
                               </li>
                               <li class="leaf-collapsed">
                            <a class="not-active" href="book218.html">8.Восстановление носителей. Воссоздание утраченных файлов. Полное восстановление. Неполное восстановление</a>
                                  </li>
                                  <li class="leaf-collapsed">
                               <a class="not-active" href="book219.html">9.Мониторинг активности и блокирование</a>
                                     </li>
                                     <li class="leaf-collapsed">
                                  <a class="not-active" href="book2110.html">10.Автоматизированные средства аудита</a>
                                        </li>
                                        <li class="leaf-collapsed">
                                     <a class="not-active" href="book2111.html">11.Брандмауэры</a>
                                           </li>
                                  </div>
     <li class="leaf-collapsed">
      <a class="not-active">Тема 2.2 Сертификация информационных систем</a>
        </li>
        <div class="sub-menu">
        <li class="leaf-collapsed">
         <a class="not-active" href="book221.html">1.Уровни качества программной продукции</a>
           </li>
           <li class="leaf-collapsed">
            <a class="not-active" href="book222.html">2.Требования к конфигурации серверного оборудования и локальных сетей.Оформление требований.</a>
              </li>
              <li class="leaf-collapsed">
               <a class="not-active" href="book223.html">3.Объекты информатизации, требующие обязательной сертификации программных средств и обеспечения</a>
                 </li>
                 <li class="leaf-collapsed">
                  <a class="not-active" href="book224.html">4.Сертификаты безопасности: виды, функции, срок действия. Проверка наличия сертификата безопасности</a>
                    </li>
                    <li class="leaf-collapsed">
                     <a class="not-active" href="book225.html">5. Системы сертификации. Процедура сертификации.</a>
                       </li>
                       <li class="leaf-collapsed">
                        <a class="not-active" href="book226.html">6. Платформы и центры сертификации. Сертификат разработчика. Процесс подписи и проверки кода</a>
                          </li>
                          <li class="leaf-collapsed">
                           <a class="not-active" href="book227.html">7. SSL сертификат: содержание, формирование запроса, проверка данных с помощью сервисов</a>
                             </li>
                             <li class="leaf-collapsed">
                              <a class="not-active" href="spicok.html">Список источников</a>
                                </li>
                              </div>
                                                       </ul>



     </div>
    </div>
 </aside>

 <div id="content" class="three-col">
   <div class="block" id="block-content">
     <div class="block-content">
       <article role="article">
         <h1 class="h1-content"><span>5.Резервное копирование: цели, методы, концепции, планирование, роль журнала транзакций. Виды резервных копий</span></h1>
         <nav role="navigation" aria-labelledby="book-label-2" class="book-navigation">
           <div class="page-links"><a href="book214.html" rel="prev" class="page-previous" title="Прошлая Тема">
             <i class="arrow icon-prev"><img src="images/arrowleft.png" alt=""></i>Тема 2.1.4</a>
             <a href="index.html" class="page-up" title="Содержание"><i class="arrow icon-up">
             <img src="images/arrowup.png" alt=""></i>Содержание</a>
             <a href="book216.html" rel="next" class="page-next" title="Следующая тема">Тема 2.1.6
               <i class="arrow icon-next"><img src="images/arrowright.png" alt=""></i>
             </a>
           </div>
         </nav>
           <div>

<h1>Резервное копирование
Теория и практика. Краткое изложение</h1>

<h2>Чтобы организовать систему резервного копирования наиболее эффективно, нужно выстроить настоящую стратегию сохранения и восстановления информации.</h2>

<p>Резервное копирование (или, как его еще называют, бэкап – от английского слова «backup») является важным процессом в жизни любой ИТ-структуры. Это парашют для спасения в случае непредвиденной катастрофы. В то же время резервное копирование используется для создания своего рода исторического архива бизнес-деятельности компании на протяжении определенного периода ее жизни. Работать без бэкапа – все равно, что жить под открытым небом – погода может испортиться в любой момент, а спрятаться негде. Но как его правильно организовать, чтобы не потерять важных данных и не потратить на это фантастические суммы?
</p>
<p>Обычно в статьях на тему организации резервного копирования рассматриваются в основном технические решения, и лишь изредка уделяется внимание теории и методике организации сохранения данных.
</p>
<p>В данной статье речь пойдет как раз об обратном: основное внимание уделено общим понятиям, а технические средства будут затронуты только в качестве примеров. Это позволит абстрагироваться от аппаратного и программного обеспечения и ответить на два главных вопроса: «Зачем мы это делаем?», «Можем ли мы это делать быстрее, дешевле и надежнее?».
</p>
<h2>Цели и задачи резервного копирования
</h2>
<p>В процессе организации резервного копирования ставятся две основные задачи: восстановление инфраструктуры при сбоях (Disaster Recovery) и ведение архива данных в целях последующего обеспечения доступа к информации за прошлые периоды.
</p>
<p>Классическим примером резервной копии для Disaster Recovery является образ системной партиции сервера, созданный программой Acronis True Image.
</p>
<p>Примером архива может выступить ежемесячная выгрузка баз данных из «1С», записанная на кассеты с последующим хранением в специально отведенном месте.
</p>
<p>Есть несколько факторов, по которым отличают резервную копию для быстрого восстановления от архива:
</p>
<ul>
<li>  Период хранения данных. У архивных копий он достаточно длительный. В некоторых случаях регламентируется не только требованиями бизнеса, но и законодательно. У копий для аварийного восстановления он сравнительно небольшой. Обычно создают одну или две (при повышенных требованиях к надежности) резервные копии для Disaster Recovery c максимальным интервалом в сутки-двое, после чего они перезаписываются свежими. В особо критичных случаях возможно и более частое обновление резервной копии для аварийного восстановления, например, раз в несколько часов.
</li>
<li>Быстрота доступа к данным. Скорость доступа к длительно хранящемуся архиву в большинстве случаев не критична. Обычно необходимость «поднять данные за период» возникает в момент сверки документов, возврата к предыдущей версии и т.д., то есть не в аварийном режиме. Другое дело – аварийное восстановление, когда необходимые данные и работоспособность сервисов должны быть возвращены в кратчайшие сроки. В этом случае скорость доступа к резервной копии является крайне важным показателем.
</li>
<li>Состав копируемой информации. В архивной копии обычно содержатся только пользовательские и бизнес-данные за указанный период. В копии, предназначенной для аварийного восстановления, помимо этих данных, содержатся либо образы систем, либо копии настроек операционной системы и прикладного программного обеспечения, а также другой информации, необходимой для восстановления.
</li> </ul>
<p>Иногда возможно совмещение этих задач. Например, годовой набор ежемесячных полных «снимков» файлового сервера, плюс изменения, сделанные в течении недели. В качестве инструмента для создания такой резервной копии подойдет True Image.
</p>
<p>Самое главное – четко понимать, для чего делается резервирование. Приведу пример: вышел из строя критичный SQL-сервер по причине отказа дискового массива. На складе есть подходящее аппаратное обеспечение, поэтому решение проблемы состояло только в восстановлении программного обеспечения и данных. Руководство компании обращается с понятным вопросом: «Когда заработает?» – и неприятно удивляется, узнав, что на восстановление уйдет целых четыре часа. Дело в том, что на протяжении всего срока службы сервера регулярно осуществлялось резервное копирование исключительно баз данных без учета необходимости восстановить сам сервер со всеми настройками, включая программное обеспечение самой СУБД. Попросту говоря, наши герои сохраняли только базы данных, а про систему забыли.
</p>
<p>Приведу другой пример. Молодой специалист на протяжении всего периода своей работы создавал посредством программы ntbackup одну-единственную копию файлового сервера под управлением Windows Server 2003, включая данные и System State  в общую папку другого компьютера. По причине дефицита дискового пространства эта копия постоянно перезаписывалась. Через некоторое время его попросили восстановить предыдущий вариант многостраничного отчета, который был поврежден при сохранении. Понятное дело, что, не имея архивной истории с выключенным Shadow Copy , он не смог выполнить этот запрос.
</p>

<p>Какой из этого следует вывод: нужно применять оба типа резервного копирования: и для аварийного восстановления, и для архивного хранения. При этом необходимо обязательно определить перечень копируемых ресурсов, время выполнения заданий, а также где, как и сколько времени будут храниться резервные копии.</p>

<p>При небольших объемах данных и не очень сложной ИТ-инфраструктуре можно попытаться совместить обе эти задачи в одной, например, делать ежедневное полное копирование всех дисковых разделов и баз данных. Но все же лучше различать две цели и подбирать под каждую из них правильное средство. Соответственно под каждую задачу используется свой инструмент, хотя есть и универсальные решения, как тот же пакет Acronis True Image или программа ntbackup.
</p>
<p>Понятно, что, определяя цели и задачи резервного копирования, а также решения для реализации, необходимо исходить из требований бизнеса.
</p>
<p>При реализации задачи аварийного восстановления можно использовать разные стратегии.
</p>
<p>В одних случаях необходимо прямое восстановление системы на «голое железо» (bare metal). Это можно выполнить, к примеру, с помощью программы Acronis True Image в комплекте с модулем Universal Restore. В этом случае конфигурацию сервера удается вернуть в строй за очень короткий срок. Например, раздел с операционной системой в 20 Гб вполне реально поднять из резервной копии за восемь минут (при условии, что архивная копия доступна по сети 1 Гб/с).
</p>
<p>В другом варианте целесообразнее просто «вернуть» настройки на только что проинсталлированную систему, как, например, копирование в UNIX-подобных системах конфигурационных файлов из папки /etc и других (в Windows этому приблизительно соответствует копирование и восстановление System State). Конечно, при таком подходе сервер введется в работу не ранее, чем будет проинсталлирована операционная система и восстановлены необходимые установки, что займет гораздо более длительный срок. Но в любом случае решение, каким быть Disaster Recovery, проистекает из потребностей бизнеса и ресурсных ограничений.
</p>
<h2>Принципиальное отличие резервного копирования от систем избыточного резервирования
</h2>
<p>Это еще один интересный вопрос, который хотелось бы затронуть. Под системами избыточного резервирования оборудования подразумевается внесение некоторой избыточности в аппаратное обеспечение с целью сохранения работоспособности в случае внезапного выхода из строя одного из компонентов. Прекрасный пример в данном случае – RAID-массив (Redundant Array of Independent Disks). В случае отказа одного диска можно избежать потери информации и безопасно произвести замену, сохранив данные за счет специфичной организации самого дискового массива.
</p>
<p>Мне доводилось слышать фразу: «У нас очень надежное оборудование, везде стоят RAID-массивы, поэтому резервные копии нам не нужны». Да, конечно, тот же самый RAID-массив убережет данные от разрушения при выходе из строя одного жесткого диска. Но вот от повреждения данных компьютерным вирусом или от неумелых действий пользователя это не спасет. Не спасет RAID и при крахе файловой системы в результате несанкционированной перезагрузки.
</p>
<p>Приведу один пример. Бывают случаи, когда события развиваются по следующему сценарию: при выходе диска из строя происходит восстановление данных за счет механизма избыточности, в частности, с помощью сохраненных контрольных сумм. При этом наблюдается значительное снижение быстродействия, сервер подвисает, управление практически потеряно. Системный администратор, не видя другого выхода, перезагружает сервер холодным перезапуском (попросту говоря, нажимает на «RESET»). В результате такой перегрузки «по живому» возникают ошибки файловой системы. Самое лучшее, чего можно ожидать в этом случае, – длительная работа программы проверки диска в целях восстановления целостности файловой системы. В худшем варианте придется попрощаться с файловой системой и озадачиться вопросом, откуда, как и в какие сроки можно восстановить данные и работоспособность сервера.
</p>
<p>У вас не получится избежать резервного копирования и при наличии кластерной архитектуры. Отказоустойчивый кластер, по сути, сохраняет работоспособность вверенных ему сервисов при выходе из строя одного из серверов. В случае вышеперечисленных проблем, таких как, вирусная атака или повреждение данных из-за пресловутого «человеческого фактора», никакой кластер не спасет.
</p>
<p>Единственное, что может выступить в качестве неполноценной замены резервного копирования для Disaster Recovery, – наличие зеркального резервного сервера с постоянным реплицированием данных с основного сервера на резервный (по принципу Primary  Standby). В этом случае при выходе из строя основного сервера его задачи будут подхвачены резервным, и даже не придется переносить данные. Но такая система является довольно дорогостоящей и трудоемкой при организации. Не забываем еще про необходимость постоянной репликации.
</p>
<p>Становится понятно, что такое решение рентабельно только в случае критичных сервисов при наличии высоких требований к отказоустойчивости и минимальном времени восстановления. Как правило, такие схемы применяются в очень крупных организациях с высоким товарно-денежным оборотом. А неполноценной заменой резервному копированию эта схема является потому, что все равно при повреждении данных компьютерным вирусом, неумелыми действиями пользователя или некорректной работой приложения, могут быть затронуты данные и программное обеспечение на обоих серверах.
</p>
<p>И уж, конечно, никакая система избыточного резервирования не решит задачу ведения архива данных в течение определенного периода.
</p>
<h2>Понятие «окно бэкапа»
</h2>
<p>Выполнение резервного копирования вызывает серьезную нагрузку на резервируемый сервер. Особенно это актуально для дисковой подсистемы и сетевых соединений. В некоторых случаях, когда процесс копирования имеет достаточно высокий приоритет, это может привести к недоступности тех или иных сервисов. Кроме этого, копирование данных в момент внесения изменений связано со значительными трудностями. Конечно, есть технические средства, позволяющие избежать проблем при сохранении целостности данных и в этом случае, но по возможности такого копирования на лету лучше избегать.
</p>
<p>Выход при решении этих вышеописанных проблем напрашивается сам собой: перенести запуск процесса создания копий на неактивный период времени, когда взаимное влияние резервного копирования и других работающих систем будет минимально. Этот временной период называется «окно бэкапа». Например, для организации, работающей по формуле 8х5 (пять восьмичасовых рабочих дней в неделю), таким «окном» обычно являются выходные дни и ночные часы.
</p>
<p>Для систем, работающих по формуле 24х7 (всю неделю круглосуточно), в качестве такого периода используется время минимальной активности, когда нет высокой нагрузки на серверы.
</p>
<h2>Виды резервного копирования
</h2>
<p>Чтобы избежать излишних материальных затрат при организации резервного копирования, а также по возможности не выходить за рамки окна бэкапа, разработано несколько технологий backup, которые применяют в зависимости от конкретной ситуации.
</p>
<h2>Полное резервное копирование (или Full backup)
</h2>
<p>Является главным и основополагающим методом создания резервных копий, при котором выбранный массив данных копируется целиком. Это наиболее полный и надежный вид резервного копирования, хотя и самый затратный. В случае необходимости сохранить несколько копий данных общий хранимый объем будет увеличиваться пропорционально их количеству. Для предотвращения подобного расточительства используют алгоритмы сжатия, а также сочетание этого метода с другими видами резервного копирования: инкрементным или дифференциальным. И, конечно, полное резервное копирование незаменимо в случае, когда нужно подготовить резервную копию для быстрого восстановления системы с нуля.
</p>
<h2>Инкрементное копирование
</h2>
<p>В отличие от полного резервного копирования в этом случае копируются не все данные (файлы, сектора и т.д.), а только те, что были изменены с момента последнего копирования. Для выяснения времени копирования могут применяться различные методы, например, в системах под управлением операционных систем семейства Windows используется соответствующий атрибут файла (архивный бит), который устанавливается, когда файл был изменен, и сбрасывается программой резервного копирования. В других системах может использоваться дата изменения файла. Понятно, что схема с применением данного вида резервного копирования будет неполноценной, если время от времени не проводить полное резервное копирование. При полном восстановлении системы нужно провести восстановление из последней копии, созданной Full backup, а потом поочередно «накатить» данные из инкрементных копий в порядке их создания.
</p>
<p>Для чего используется этот вид копирования? В случае создания архивных копий он необходим, чтобы сократить расходуемые объемы на устройствах хранения информации (например, сократить число используемых ленточных носителей). Также это позволит минимизировать время выполнения заданий резервного копирования, что может быть крайне важно в условиях, когда приходится работать в плотном графике 24х7 или прокачивать большие объемы информации.
</p>
<p>У инкрементного копирования есть один нюанс, который нужно знать. Поэтапное восстановление возвращает и нужные удаленные файлы за период восстановления. Приведу пример. Допустим, по выходным дням выполняется полное копирование, а по будням инкрементное. Пользователь в понедельник создал файл, во вторник его изменил, в среду переименовал, в четверг удалил. Так вот при последовательном поэтапном восстановлении данных за недельный период мы получим два файла: со старым именем за вторник до переименования, и с новым именем, созданным в среду. Это произошло потому, что в разных инкрементных копиях хранились разные версии одного и того же файла, и в итоге будут восстановлены все варианты. Поэтому при последовательном восстановлении данных из архива «как есть» имеет смысл резервировать больше дискового пространства, чтобы смогли поместиться в том числе и удаленные файлы.
</p>
<h2>Дифференциальное резервное копирование
</h2>
<p>Отличается от инкрементного тем, что копируются данные с последнего момента выполнения Full backup. Данные при этом помещаются в архив «нарастающим итогом». В системах семейства Windows этот эффект достигается тем, что архивный бит при дифференциальном копировании не сбрасывается, поэтому измененные данные попадают в архивную копию, пока полное копирование не обнулит архивные биты.
</p>
<p>В силу того, что каждая новая копия, созданная таким образом, содержит данные из предыдущей, это более удобно для полного восстановления данных на момент аварии. Для этого нужны только две копии: полная и последняя из дифференциальных, поэтому вернуть к жизни данные можно гораздо быстрее, чем поэтапно накатывать все инкременты. К тому же этот вид копирования избавлен от вышеперечисленных особенностей инкрементного, когда при полном восстановлении старые файлы, подобно птице Феникс, возрождаются из пепла. Возникает меньше путаницы.
</p>
<p>Но дифференциальное копирование значительно проигрывает инкрементному в экономии требуемого пространства. Так как в каждой новой копии хранятся данные из предыдущих, суммарный объем зарезервированных данных может быть сопоставим с полным копированием. И, конечно, при планировании расписания (и расчетах, поместится ли процесс бэкапа во временное «окно») нужно учитывать время на создание последней, самой «толстой», дифференциальной копии.
</p>
<h1>Топология резервного копирования</h1>
<p>Рассмотрим какие бывают схемы резервного копирования.
</p>
<h2>Децентрализованная схема
</h2>
<p>Ядром этой схемы является некий общий сетевой ресурс (см. рис. 1). Например, общая папка или FTP-сервер. Необходим и набор программ для резервного копирования, время от времени выгружающих информацию с серверов и рабочих станций, а также других объектов сети (например, конфигурационные файлы с маршрутизаторов) на этот ресурс. Данные программы установлены на каждом сервере и работают независимо друг от друга. Несомненным плюсом является простота реализации этой схемы и ее дешевизна. В качестве программ копирования подойдут штатные средства, встроенные в операционную систему, или программное обеспечение, такое как СУБД. Например, это может быть программа ntbackup для семейства Windows, программа tar для UNIX-like операционных систем или набор скриптов, содержащих встроенные команды SQL-сервера для выгрузки баз данных в файлы резервных копий. Еще одним плюсом является возможность использования различных программ и систем, лишь бы все они могли получить доступ к целевому ресурсу для хранения резервных копий.
</p>

<p class="img-content"><img src="images/book2151.png" alt="Рис. 1.1" width="608" height="296"></p>
<p class="imgsign">Рисунок 1. Децентрализованная схема резервного копирования</p>

<p>Минусом является неповоротливость этой схемы. Так как программы установлены независимо друг от друга, то и настраивать приходится каждую по отдельности. Довольно тяжело учитывать особенности расписания и распределять временные интервалы, чтобы избежать конкуренции за целевой ресурс. Мониторинг также затруднен, процесс копирования с каждого сервера приходится отслеживать отдельно от других, что в свою очередь может привести к высоким трудозатратам.
</p>
<p>Поэтому данная схема применяется в небольших сетях, а также в ситуации, когда невозможно организовать централизованную схему резервного копирования имеющимися средствами. Более подробное описание этой схемы и практическую организацию можно найти в.
</p>
<h2>Централизованное резервное копирование
</h2>
<p>В отличие от предыдущей схемы в этом случае используется четкая иерархическая модель, работающая по принципу «клиент-сервер». В классическом варианте на каждый компьютер устанавливаются специальные программы-агенты, а на центральный сервер – серверный модуль программного пакета. Эти системы также имеют специализированную консоль управления серверной частью. Схема управления выглядит следующим образом: с консоли создаем задания для копирования, восстановления, сбора информации о системе, диагностики и так далее, а сервер дает агентам необходимые инструкции для выполнения указанных операций.
</p>
<p>Именно по такому принципу работает большинство популярных систем резервного копирования, таких как Symantec Backup Exec, CA Bright Store ARCServe Backup, Bacula и другие (см. рис. 2).
</p>
<p class="img-content"><img src="images/book2152.png" alt="Рис. 1.1" width="608" height="296"></p>
<p class="imgsign">Рисунок 2. Централизованная схема резервного копирования</p>

<p>Помимо различных агентов для большинства операционных систем существуют разработки для резервного копирования популярных баз данных и корпоративных систем, например, для MS SQL Server, MS Exchange, Oracle Database и так далее.
</p>
<p>Для совсем небольших компаний в некоторых случаях можно попробовать упрощенный вариант централизованной схемы резервного копирования без применения программ-агентов (см. рис. 3). Также эта схема может быть задействована, если не реализован специальный агент для используемого ПО резервного копирования. Вместо этого серверный модуль будет использовать уже существующие службы и сервисы. Например, «выгребать» данные из скрытых общих папок на Windows-серверах или копировать файлы по протоколу SSH c серверов под управлением UNIX-систем. Данная схема имеет весьма существенные ограничения, связанные с проблемами сохранения файлов, открытых для записи. В результате подобных действий открытые файлы будут либо пропущены и не попадут в резервную копию, либо скопированы с ошибками. Существуют различные методы обхода данной проблемы, например, повторный запуск задания с целью скопировать только ранее открытые файлы, но нет ни одного надежного. Поэтому такая схема подходит для применения только в определенных ситуациях. Например, в небольших организациях, работающих в режиме 5х8, с дисциплинированными сотрудниками, которые сохраняют изменения и закрывают файлы перед уходом домой. Для организации такой усеченной централизованной схемы, работающей исключительно в среде Windows, неплохо подходит ntbackup. При необходимости использовать подобную схему в гетерогенных средах или исключительно среди UNIX-компьютеров я рекомендую посмотреть в сторону Backup PC.
</p>
<p class="img-content"><img src="images/book2153.png" alt="Рис. 1.1" width="608" height="296"></p>
<p class="imgsign">Рисунок 3. Упрощенная централизованная схема резервного копирования</p>

<p>Иногда организуют смешанную схему резервного копирования (см. рис. 4). Например, с серверов, для которых есть в наличии программы-агенты резервного копирования, данные собираются посредством этих агентов. Для всех остальных ресурсов используется децентрализованная схема, то есть когда локальные программы складывают копии данных на некий общий ресурс сервера с установленным агентом, и далее посредством этого агента информация заносится в общее хранилище резервных копий.</p>

<p class="img-content"><img src="images/book2153.png" alt="Рис. 1.1" width="608" height="296"></p>
<p class="imgsign">Рисунок 4. Смешанная схема резервного копирования</p>

<h2>Что такое off-site?</h2>

<p>В нашем неспокойном изменчивом мире могут произойти события, способные вызвать неприятные последствия для ИТ-инфраструктуры и бизнеса в целом. Например, пожар в здании. Или прорыв батареи центрального отопления в серверной комнате. Или банальная кража техники и комплектующих. Одним из методов избежать потери информации в таких ситуациях является хранение резервных копий в месте, удаленном от основного расположения серверного оборудования. При этом необходимо предусмотреть быстрый способ доступа к данным, необходимым для восстановления. Описываемый метод называется off-site (проще говоря, хранение копий за территорией предприятия). В основном используются два метода организации этого процесса.
</p>
<p>Запись данных на съемные носители и их физическое перемещение. В этом случае необходимо позаботиться о средствах быстрой доставки носителей обратно в случае сбоя. Например, хранить их в соседнем здании. Плюсом такого метода является возможность организовать этот процесс без каких-либо затруднений. Минусом являются сложность возврата носителей и сама необходимость передачи информации на хранение, а также риск повредить носители при перевозке.
</p>
<p>Копирование данных в другое расположение по сетевому каналу. Например, с использованием VPN-туннеля через Интернет. Плюсом в этом случае является то, что нет нужды везти куда-то носители с информацией, минусом – необходимость использования достаточного широкого канала (как правило, это весьма недешево) и защиты передаваемых данных (например, с помощью того же VPN). Возникающие сложности передачи больших объемов данных можно значительно снизить, используя алгоритмы сжатия или технологию дедупликации.
</p>
<p>Отдельно стоит сказать о мерах безопасности при организации хранения данных. В первую очередь необходимо позаботиться о том, чтобы носители с данными находились в охраняемом помещении, и о мерах, препятствующих прочтению данных посторонними лицами. Например, использовать систему шифрования, заключить договора о неразглашении и так далее. Если задействованы съемные носители, данные на них должны быть также зашифрованы. Используемая система маркировки при этом не должна помогать злоумышленнику в анализе данных. Необходимо применять безликую номерную схему маркировки носителей названий передаваемых файлов. При передаче данных по сети необходимо (как уже писалось выше) использовать безопасные методы передачи данных, например, VPN-туннель.
</p>


     </div>
     <nav role="navigation" aria-labelledby="book-label-2" class="book-navigation">
       <div class="page-links"><a href="book214.html" rel="prev" class="page-previous" title="Прошлая Тема">
         <i class="arrow icon-prev"><img src="images/arrowleft.png" alt=""></i>Тема 2.1.4</a>
         <a href="index.html" class="page-up" title="Содержание"><i class="arrow icon-up">
         <img src="images/arrowup.png" alt=""></i>Содержание</a>
         <a href="book216.html" rel="next" class="page-next" title="Следующая тема">Тема 2.1.6
           <i class="arrow icon-next"><img src="images/arrowright.png" alt=""></i>
         </a>
       </div>
     </nav>
   </article>
 </div>
</div>
  </div>
</div>
<footer>
  <div class="footer">

  <div class="footer-inner">
    <div class="footer-ss">
     <div class="footer-name">
        <a href="https://nggtk.ru"> <p class="footer-name"><i class="arrow icon-up">
        <img src="images/icon1.png" alt=""></i>Сайт ГАПОУ НГТК</p> </a>
    <a href="https://vk.com/gapou_ngtk"> <p class="footer-name"><i class="arrow icon-up">
    <img src="images/icon2.png" alt=""></i>Группа ГАПОУ НГТК в ВК</p> </a>
     </div>

    </div>
    <div>
      <p>Создано Максяшкиным Валерием Валерьевичем <br>
      С помощью текстового редактора Atom</p>
    </div>
      <a href="#top"class="top">Back to top</a>
  </div>
</div>
</footer>

</body>

</html>
