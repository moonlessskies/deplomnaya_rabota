<!DOCTYPE html>
<html lang="ru">
<head>
  <title>Электронное учебное пособие Соадминистрирование баз данных и серверов</title>
  <meta charset="UTF-8">
  <link rel="stylesheet" href="css/style.css">
  <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
  <link rel="icon" href="favicon.ico" type="image/x-icon">
</head>
<body>


  <header class="header">
    <div class="container">
      <div class="header__inner">
        <div class="header__logo">
         <img src="images/logotype-active.png" width="100px" alt="">
         <div class="name">
           <h2>Электронное учебное пособие</h2>
           <h2>Соадминистрирование баз данных и серверов</h2>
         </div>
         <a id="top"></a>
        </div>
        <nav class="nav">
          <a class="nav__link" href="index.html">Учебник</a>
          <a class="nav__link" href="basepr.html">Практика</a>
          <a class="nav__link" href="video1.html">Видео материал</a>
        </nav>
      </div>
    </div>
  </header>
<div class="layout">
  <aside class="aside-menu">
    <div class="block" id="block-htmlbook-block-28"><div class="block-content"></div></div>
    <div class="block" id="block-htmlbook-book-navigation">
       <h2 class="block-title">Содержание</h2>
     <div class="block-content">
  <ul class="menu">
                 <li class="leaf-collapsed">

                 <a class="not-active" href="index.html">Раздел 1. Технологии администрирования серверов и баз данных</a>
                    </li>
                    <li class="leaf-collapsed">

                 <a class="not-active">Тема 1.1. Принципы построения и администрирования баз данных
                        </a>
                       </li>
                         <div class="sub-menu">

         <a class="not-active" href="book111.html">1.Обязанности администратора баз данных. Основные утилиты администратора баз данных. Режимы запуска и останова базы данных.</a>
               </li>


                 <li class="leaf_active-trail">
                 <a href="book112.html" class="is-active">2.Пользователи базы данных. Привилегии, назначение привилегий. Управление пользователями баз данных
                 <span class="pointer" style="border-width: 11px 6px;"></span></a>
                 </li>
                 <li class="leaf-collapsed">
         <a class="not-active" href="book113.html">3.Табличные пространства и файлы данных. Модели и типы данных.</a>
               </li>
     	      <li class="leaf-collapsed">

         <a class="not-active" href="book114.html">4.Схемы и объекты схемы данных. Блоки данных, экстенты сегменты.</a>
               </li>
     	      <li class="leaf-collapsed">

         <a class="not-active" href="book115.html">5.Структуры памяти. Однопроцессорные и многопроцессорные базы данных</a>
               </li>
     	      <li class="leaf-collapsed">

         <a class="not-active" href="book116.html">6.Транзакции, блокировки и согласованность данных</a>
               </li>
     	      <li class="leaf-collapsed">

         <a class="not-active" href="book117.html">7.Журнал базы данных: структура и назначение файлов журнала, управление переключениями и контрольными точками</a>
               </li>
     	      <li class="leaf-collapsed">

         <a class="not-active" href="book118.html">8. Словарь данных: назначение, структура, префиксы </a>
               </li>
     	      <li class="leaf-collapsed">

         <a class="not-active" href="book119.html">9. Правила Дейта</a>
               </li>
             </div>

     	      <li class="leaf-collapsed">

         <a class="not-active">Тема 1.2. Серверы баз данных</a>
               </li>

               <div class="sub-menu">

     	      <li class="leaf-collapsed">


         <a class="not-active" href="book121.html">1.Понятие сервера. Классификация серверов. Принципы разделения между клиентскими и серверными частями. Типовое разделение функций</a>
               </li>
     	      <li class="leaf-collapsed">

         <a class="not-active" href="book122.html">2.Протоколы удаленного вызова процедур. Требования к аппаратным возможностям и базовому программному обеспечению клиентов и серверов</a>
               </li>
     	      <li class="leaf-collapsed">
         <a class="not-active" href="book123.html">3.Хранимые процедуры и триггеры</a>
               </li>
     	      <li class="leaf-collapsed">

         <a class="not-active" href="book124.html">4.Характеристики серверов баз данных. Механизмы доступа к базам данных</a>
               </li>
               <li class="leaf-collapsed">
              <a class="not-active" href="book125.html">5. Аппаратное обеспечение. Для квалификации «Администратор баз данных»: Развертывание серверов баз данных</a>
                  </li>
                  <li class="leaf-collapsed">
                 <a class="not-active" href="book126.html">6. Банк данных: состав, схема</a>
                     </li>
             </div>
             <li class="leaf-collapsed">
          <a class="not-active">Тема 1.3.Администрирование баз данных и серверов</a>
                </li>
     <div class="sub-menu">
      <li class="leaf-collapsed">
      <a class="not-active" href="book131.html">1.Технология установки и настройка сервера MySQL в операционной системе Windows.Клиентские настройки, протоколирование, безопасность</a>
         </li>
         <li class="leaf-collapsed">
      <a class="not-active" href="book132.html">2.Технология установки и настройка сервера MySQL в операционных системах Linux</a>
            </li>
            <li class="leaf-collapsed">
         <a class="not-active" href="book133.html">3.Удаленное администрирование</a>
               </li>
               <li class="leaf-collapsed">
            <a class="not-active" href="book134.html">4.Аудит базы данных. Аудиторский журнал. Установка опций, включение и отключение аудита. Очистка и уменьшение размеров журнала</a>
                  </li>
                  <li class="leaf-collapsed">
               <a class="not-active" href="book135.html">5.Технологии создания базы данных с применением языка SQL.Добавление, удаление данных и таблиц</a>
                     </li>
                     <li class="leaf-collapsed">
                  <a class="not-active" href="book136.html">6.Создание запросов, процедур и триггеров. Для квалификации «Администратор баз данных». Создание запросов и процедур на изменение структуры базы данных</a>
                        </li>
                        <li class="leaf-collapsed">
                     <a class="not-active" href="book137.html">7.Динамический SQL и его операторы.</a>
                           </li>
                           <li class="leaf-collapsed">
                        <a class="not-active" href="book138.html">8.Особенности обработки данных в объектно-ориентированных базах данных</a>
                              </li>
                              <li class="leaf-collapsed">
                           <a class="not-active" href="book139.html">9. Инструменты мониторинга нагрузки сервера</a>
                                 </li>

    </div>
    <li class="leaf-collapsed">
    <a class="not-active" href="index.html">Раздел 2. Обеспечение качества и сертификация информационных систем </a>
       </li>
       <li class="leaf-collapsed">
     <a class="not-active">Тема 2.1. Защитаи сохранность информации баз данных</a>
          </li>
     <div class="sub-menu">
          <li class="leaf-collapsed">
        <a class="not-active" href="book211.html">1.Законодательство Российской Федерации в области защиты информации. Требования безопасности к серверам баз данных. Классы защиты</a>
             </li>
             <li class="leaf-collapsed">
           <a class="not-active" href="book212.html">2.Основные группы методов противодействия угрозам безопасности в корпоративных сетях</a>
                </li>
                <li class="leaf-collapsed">
             <a class="not-active" href="book213.html">3.Программно-аппаратные методы защиты процесса обработки и передачи информации. Политика безопасности, настройка политики безопасности</a>
                   </li>
                   <li class="leaf-collapsed">
                <a class="not-active" href="book214.html">4.Виды неисправностей систем хранения данных</a>
                      </li>
                      <li class="leaf-collapsed">
                   <a class="not-active" href="book215.html">5.Резервное копирование: цели, методы, концепции, планирование, роль журнала транзакций. Виды резервных копий</a>
                         </li>
                         <li class="leaf-collapsed">
                      <a class="not-active" href="book216.html">6.Утилиты резервного копирования </a>
                            </li>
                            <li class="leaf-collapsed">
                         <a class="not-active" href="book217.html">7.Восстановление базы данных: основные алгоритмы и этапы</a>
                               </li>
                               <li class="leaf-collapsed">
                            <a class="not-active" href="book218.html">8.Восстановление носителей. Воссоздание утраченных файлов. Полное восстановление. Неполное восстановление</a>
                                  </li>
                                  <li class="leaf-collapsed">
                               <a class="not-active" href="book219.html">9.Мониторинг активности и блокирование</a>
                                     </li>
                                     <li class="leaf-collapsed">
                                  <a class="not-active" href="book2110.html">10.Автоматизированные средства аудита</a>
                                        </li>
                                        <li class="leaf-collapsed">
                                     <a class="not-active" href="book2111.html">11.Брандмауэры</a>
                                           </li>
                                  </div>
     <li class="leaf-collapsed">
      <a class="not-active">Тема 2.2 Сертификация информационных систем</a>
        </li>
        <div class="sub-menu">
        <li class="leaf-collapsed">
         <a class="not-active" href="book221.html">1.Уровни качества программной продукции</a>
           </li>
           <li class="leaf-collapsed">
            <a class="not-active" href="book222.html">2.Требования к конфигурации серверного оборудования и локальных сетей.Оформление требований.</a>
              </li>
              <li class="leaf-collapsed">
               <a class="not-active" href="book223.html">3.Объекты информатизации, требующие обязательной сертификации программных средств и обеспечения</a>
                 </li>
                 <li class="leaf-collapsed">
                  <a class="not-active" href="book224.html">4.Сертификаты безопасности: виды, функции, срок действия. Проверка наличия сертификата безопасности</a>
                    </li>
                    <li class="leaf-collapsed">
                     <a class="not-active" href="book225.html">5. Системы сертификации. Процедура сертификации.</a>
                       </li>
                       <li class="leaf-collapsed">
                        <a class="not-active" href="book226.html">6. Платформы и центры сертификации. Сертификат разработчика. Процесс подписи и проверки кода</a>
                          </li>
                          <li class="leaf-collapsed">
                           <a class="not-active" href="book227.html">7. SSL сертификат: содержание, формирование запроса, проверка данных с помощью сервисов</a>
                             </li>
                             <li class="leaf-collapsed">
                              <a class="not-active" href="spicok.html">Список источников</a>
                                </li>
                              </div>
                                                       </ul>



     </div>
    </div>
 </aside>

 <div id="content" class="three-col">
   <div class="block" id="block-content">
     <div class="block-content">
       <article role="article">
         <h1 class="h1-content"><span>2.Пользователи и схемы базы данных. Привилегии, назначение привилегий. Управление пользователями баз данных</span></h1>
         <nav role="navigation" aria-labelledby="book-label-2" class="book-navigation">
           <div class="page-links"><a href="book111.html" rel="prev" class="page-previous" title="Прошлая Тема">
             <i class="arrow icon-prev"><img src="images/arrowleft.png" alt=""></i>Тема 1.1</a>
             <a href="index.html" class="page-up" title="Содержание"><i class="arrow icon-up">
             <img src="images/arrowup.png" alt=""></i>Содержание</a>
             <a href="book113.html" rel="next" class="page-next" title="Следующая тема">Тема 1.3.
               <i class="arrow icon-next"><img src="images/arrowright.png" alt=""></i>
             </a>
           </div>
         </nav>
           <div>
             <h1>Пользователи баз данных и схемы</h1>
             <p class="img-content"><img src="images/book1121.PNG" alt="Рис. 1.1" width="608" height="296"></p>
             <p class="imgsign">Рис.2.1 Пользователи и роли базы данныx</p>

           <h2>Пользователи баз данных (database users) —</h2>  <p> это специальные объекты, которые создаются на уровне базы данных и используются для предоставления разрешений в базе данных (на таблицы, представления, хранимые процедуры).   </p>
<p>При создании любой базы данных в ней автоматически создаются четыре специальных пользователя: </p>
<ul>
  <li>· dbo (от database owner) — пользователь-владелец базы данных. Он автоматически создается для того логина, от имени которого была создана эта база данных. Конечно же, как владелец, он получает полные права на свою базу данных (при помощи встроенной роли базы данных db_owner);
</li>  <li>· guest (гость) — этот специальный пользователь предназначен для предоставления разрешений всем логинам, которым не соответствует ни один пользователь в базе данных. По умолчанию у этого пользователя нет права login для базы данных, и, следовательно, работать он не будет. Этот пользователь используется чаще всего для предоставления разрешений логинам на какие-то учебные/тестовые базы данных или на базы данных-справочники, доступные только на чтение;
</li>  <li>· INFORMATION_SCHEMA — этому пользователю не может соответствовать ни один логин. Его единственное значение — быть владельцем схемы INFORMATION_SCHEMA, в которой хранятся представления системной информации для базы данных;
</li>  <li>· sys — этому специальному пользователю, как и INFORMATION_SCHEMA, не могут соответствовать логины. Он является владельцем схемы sys, которой принадлежат системные объекты базы данных.</li> </ul>
<h2>Роли базы данных</h2>
<p>Обычно после создания логина и пользователя базы данных следующее, что нужно сделать, — предоставить пользователю разрешения в базе данных. Один из способов сделать это — воспользоваться ролями базы данных.</p>
<p>Роли базы данных — это специальные объекты, которые используются для упрощения предоставления разрешений в базах данных. В отличие от серверных ролей, которые могут быть только встроенными, роли баз данных могут быть как встроенными, так и пользовательскими. Встроенные роли баз данных обладают предопределенным набором разрешений, а пользовательские роли можно использовать для группировки пользователей при предоставлении разрешений. Обычно пользовательские роли используются только для логинов SQL Server, поскольку для группировки логинов Windows обычно удобнее и проще использовать группы Windows.</p>
<p>Вначале перечислим встроенные роли баз данных:</p>
<ul>
<li>
  public — эта специальная роль предназначена для предоставления разрешений сразу всем пользователям базы данных. Специально сделать пользователя членом этой роли или лишить его членства невозможно. Все пользователи базы данных получают права этой роли автоматически.
 </li><li>
 · db_owner — этой роли автоматически предоставляются полные права на базу данных. Изначально права этой роли предоставляются только специальному пользователю dbo, а через него — логину, который создал эту базу данных;
 </li><li>
 · db_accessadmin — роль для сотрудника, ответственного за пользователей базы данных. Этот сотрудник получит возможность создавать, изменять и удалять объекты пользователей баз данных, а также создавать схемы. Других прав в базе данных у него нет;
 </li><li>
 · db_securityadmin— эта роль дополняет роль db_accessadmin. Сотрудник с правами этой роли получает возможность назначать разрешения на объекты базы данных и изменять членство во встроенных и пользовательских ролях. Прав на создание и изменение объектов пользователей у этой роли нет;
 </li><li>
 · db_backupoperator — эта роль дает право выполнять резервное копирование базы данных;
 </li><li>
 · db_ddladmin — эта роль применяется в редких ситуациях, когда пользователю необходимо дать право создавать, изменять и удалять любые объекты в базе данных, не предоставляя прав на информацию, которая содержится в существующих объектах;
 </li><li>
 · db_datareader и db_datawriter — эти встроенные роли дают право просматривать и изменять соответственно (в том числе добавлять и удалять) любую информацию в базе данных. Очень часто пользователю необходимо дать права на чтение и запись информации во всех таблицах базы данных, не предоставляя ему лишних административных разрешений (на создание и удаление объектов, изменение прав и т. п.). Самый простой вариант в этой ситуации — воспользоваться этими двумя ролями.
 </li><li>
 · db_denydatareader и db_denydatawriter— эти роли противоположны ролям db_datareader и db_datawriter. Роль db_ denydatareader явно запрещает просматривать какие-либо данные, а db_denydatawriter запрещает внесение изменений. Явный запрет всегда имеет приоритет перед явно предоставленными разрешениями. Обычно эти роли используются в ситуации, когда "разрешаем всем, а потом некоторым запрещаем".
</li>
</ul>
<h2>Привилегии, предоставляемые пользователям</h2>
<p class="img-content"><img src="images/book1122.png" alt="Рис. 1.1" width="608" height="296"></p>
<p class="imgsign">Рис.2.2 Привилегии, предоставляемые пользователям</p>


<p>Каждому пользователю (user name) базы данных предоставляются привилегии доступа к объектам базы данных, которые и являются вторым уровнем защиты базы данных. Привилегии, предоставленные пользователям, хранятся в самой базе данных как метаданные. Привилегии каждому пользователю предоставляются явно. Привилегии предоставляются на каждую таблицу (table) или просмотр (view) с указанием конкретных действий, которые может выполнять пользователь. Для работы с хранимыми процедурами (stored procedure) пользователю предоставляются отдельные привилегии.
</p><p>
Всеми привилегиями для работы с объектом владеют пользователь БУБОВА и владелец (создатель) объекта.
</p><p>
Владелец объекта и пользователь SYSDBA назначают привилегии прочим пользователям. Привилегии для управления объектом могут быть назначены полностью или частично.
</p><p>
Кроме того, эти же лица могут наделить любого пользователя правом наследования. Пользователь с правом наследования может по своему усмотрению наделять других пользователей привилегиями, причем передавать только те привилегии, которые имеет сам (в полном объеме или частично).
</p><p>
Для наделения пользователя привилегиями используется оператор GRANT', а для изъятия привилегий — оператор REVOKE.
</p><p>
Владелец базы данных и пользователь БУБОВА могут лишить привилегий любого пользователя.
</p><p>
Пользователь с правом наследования может лишить привилегий только тех пользователей, которым он предоставил привилегии.
</p><p>
Пользователя SYSDBA нельзя лишить привилегий, поэтому действие операторов GRANT и REVOKE на него не распространяется.
</p><p>
Оператор GRANT
</p><p>
Оператор GRANT предоставляет пользователю конкретные привилегии на конкретный объект. Ниже приведен список предоставляемых привилегий:
</p><p>
Insert — добавлять записи в таблицу;
</p><p>
Update — редактировать записи в таблице;
</p><p>
Delete — удалять записи из таблицы;
</p><p>
Select — читать таблицу;
</p><p>
Execute — выполнить хранимую процедуру;
</p><p>
References — сервер проверяет внешние ссылки на другие таблицы;
</p><p>
АН — предоставляет все вышеуказанные привилегии, за исключением Execute.
</p><p>
Привилегии предоставляются на один объект одному или нескольким пользователям. Если одному пользователю надо назначить привилегии для работы с несколькими объектами, то оператор GRANT выполняется несколько раз.
</p><p>
Особенностью оператора GRANT является то, что он может предоставить привилегии не существующему (не зарегистрированному в файле iscA.gdb) в данный момент времени пользователю.
</p><p>
Пример 1. Предоставить пользователю USER INS две привилегии для работы с таблицей Town.
</p><p>
GRANT Select, Insert ON Town TO USER JNS;
</p><p>
После выполнения оператора GRANT пользователь USERINS получит право на просмотр записей и добавление записей в таблице Town.
</p><p>
Пример 2. Предоставить пользователю USER CHEFF все привилегии для работы с таблицей Town.
</p><p>
GRANT All ON Town TO USERCHEFF;
</p><p>
Оператор может выдавать привилегии как для работы со всей таблицей, так и для работы с отдельными доменами (столбцами) таблицы, при этом формат оператора несколько изменяется.
</p><p>
Пример 3. Предоставить пользователю USERUPD две привилегии для работы с тремя столбцами таблицы Town.
</p><p>
GRANT Select, Update(Name book, Year, Price) ON Book TO
</p><p>
USER UPD;
</p><p>
Пример 4. Предоставить четырем пользователям две привилегии для работы с таблицей Town.
</p><p>
GRANT Select, Insert ON Town TO USERJ, USER_2, USER_3,
</p><p>
USER4;
</p><p>
После выполнения оператора GRANT четыре пользователя получат право на просмотр записей и добавление записей в таблице Town.
</p><p>
С помощью одного оператора GRANT можно назначить привилегии не более чем 1500 пользователям.
</p><p>
Пользователю привилегия для работы с хранимой процедурой выдается отдельно.
</p><p>
Пример 5. Предоставить пользователю USER CHEFF привилегию для работы с хранимой процедурой.
</p><p>
GRANT Execute ON PROCEDURE Ostatok TO USERCHEFF;
</p><p>
После выполнения этого оператора пользователь получит право для работы с хранимой процедурой Ostatok. Мало выдать пользователю привилегию для работы с хранимой процедурой, необходимо еще, чтобы и сама хранимая процедура имела привилегии для работы с таблицей или таблицами.
</p><p>
Оператор GRANT обладает свойством аддитивности.
</p><p>
Если у пользователя есть одна привилегия для работы с одной таблицей, то в любой момент времени этому пользователю можно добавить одну или несколько привилегий для работы с той же таблицей, т. е. привилегии накапливаются.
</p><p>
Назначение привилегий хранимой процедуре и триггеру
</p><p>
Хранимая процедура и триггер рассматриваются сервером InterBase как самостоятельные объекты базы данных. Поэтому им необходимо предоставить необходимые привилегии для работы с таблицами или другими объектами базы данных.
</p><p>
При работе с хранимыми процедурами ключевое слово PROCEDURE является обязательным.
</p><p>
Пример 6. Предоставить хранимой процедуре Ostatok все привилегии для работы с таблицей Воок.
</p><p>
GRANT Ail ON Воок ТО PROCEDURE Ostatok;
</p><p>
В примере 1. пользователю USER INS были выданы две привилегии Select и Insert для работы с таблицей Town. Если пользователь USER INS для добавления записи использует хранимую процедуру Contr?le, то и хранимая процедура должна иметь привилегию Insert для работы с таблицей Town.
</p><p>
Пример 7. Предоставить хранимой процедуре Contr?le привилегию Insert для работы с таблицей Town.
</p><p>
GRANT Insert ON Town TO PROCEDURE Contr?le;
</p><p>
Для того чтобы старшая хранимая процедура (Proc Parent) могла вызывать младшую хранимую процедуру (ProcChild) даже при отсутствии соответствующих привилегий у пользователя, необходимо предоставить соответствующие привилегии старшей процедуре.
</p><p>
Пример 8. Предоставить хранимой процедуре Proc_Parent привилегию для работы с хранимой процедурой Proc_Child.
</p><p>
GRANT Execute ON PROCEDURE Proc_Child TO Proc Parent;
</p><p>
При внесении изменений в хранимую процедуру с помощью команды ALTER PROCEDURE все привилегии, выданные процедуре, отменяются.
</p><p>
Привилегии, выданные хранимой процедуре или триггеру, проверяются один раз при открытии базы данных. Если хранимая процедура или триггер не имеют каких-либо привилегий для работы с таблицей (или таблицами), то при их вызове возбуждается исключительная ситуация, их работа прекращается и выдается сообщение об ошибке.
</p><p>
Назначение привилегий просмотрам
</p><p>
Просмотр (View) можно рассматривать как виртуальную таблицу. Он также является самостоятельным объектом базы данных и ему необходимо назначить привилегии доступа. Просмотры привилегии доступа назначаются с помощью оператора GRANT по правилам таблиц. В зависимости от вида просмотра — исполняемый или неисполняемый — назначаются соответствующие привилегии.
</p><p>
Просмотры являются мощным средством разграничения пользователей базы данных. Им (пользователям) можно предоставить просмотр как всей таблицы, так и ее частей, при этом сама база данных остается недоступной пользователю.
</p><p>
Просмотру дополнительно не выдается привилегия на извлечение записей таблицы, так как он построен на основе данных этой таблицы с помощью запроса SELECT.
</p><p>
Пример 9. Предоставить пользователю USER ] просматривать содержимое таблицы Town с помощью просмотра Vtown.
</p><p>
GRANT Select ON Vjown TO USERJ;
</p><p>
В этом примере предполагалось, что просмотр V_town был создан ранее.
</p><p>
Использование специального ключевого слова при работе с просмотрами, в отличие от хранимых процедур, не требуется.</p>
<h1>Управление пользователями баз данных</h1>
<p>Стабильная система управления пользователями – обязательное условие безопасности данных, хранящихся в любой реляционной СУБД. В языке SQL не существует единственной стандартной команды, предназначенной для создания пользователей базы данных – каждая реализация делает это по-своему. В одних реализациях эти специальные команды имеют определенное сходство, в то время как в других их синтаксис имеет существенные отличия. Однако независимо от конкретной реализации все основные принципы одинаковы.</p>
<h2>Управление пользователями в среде MS SQL Server</h2>
<p>Рассмотрим вопрос создания пользователей в среде MS SQL Server.
</p><p>
После проектирования логической структуры базы данных, связей между таблицами, ограничений целостности и других структур необходимо определить круг пользователей, которые будут иметь доступ к базе данных.
</p><p>
В системе SQL-сервер организована двухуровневая настройка ограничения доступа к данным. На первом уровне необходимо создать так называемую учетную запись пользователя (login), что позволяет ему подключиться к самому серверу, но не дает автоматического доступа к базам данных. На втором уровне для каждой базы данных SQL-сервера на основании учетной записи необходимо создать запись пользователя. На основе прав, выданных пользователю как пользователю базы данных (user), его регистрационное имя (login) получает доступ к соответствующей базе данных. В разных базах данных login одного и того же пользователя может иметь одинаковые или разные имена user с разными правами доступа. Иначе говоря, с помощью учетной записи пользователя осуществляется подключение к SQL-серверу, после чего определяются его уровни доступа для каждой базы данных в отдельности.
</p><p>
В системе SQL-сервер существуют дополнительные объекты – роли, которые определяют уровень доступа к объектам SQL-сервера. Они разделены на две группы: назначаемые для учетных записей пользователя сервера и используемые для ограничения доступа к объектам базы данных.
</p><p>
Итак, на уровне сервера система безопасности оперирует следующими понятиями:
</p><ul>
<li>
аутентификация ;</li><li>
учетная запись ;</li><li>
встроенные роли сервера.</li></ul>
<p>На уровне базы данных применяются следующие понятия;</p>
<ul><li>
пользователь базы данных;</li><li>
фиксированная роль базы данных;</li><li>
пользовательская роль базы данных.</li></ul>
<h2>Режимы аутентификации</h2>
<p>SQL Server предлагает два режима аутентификации пользователей:</p>
<ul>
  <li>режим аутентификации средствами Windows NT/2000;</li>
  <li>смешанный режим аутентификации (Windows NT Authentication and SQL Server Authentication).</li>
</ul>
<h2>Администрирование системы безопасности</h2>
<p class="img-content"><img src="images/book1123.PNG" alt="Рис. 1.1" width="608" height="296"></p>
<p class="imgsign">Рис.2.3 Защита баз данных.</p>

<p>Для создания пользователя в среде MS SQL Server следует предпринять следующие шаги:
</p><p>
Создать в базе данных учетную запись пользователя, указав для него пароль и принятое по умолчанию имя базы данных (процедура sp_addlogin ).</p><p>
Добавить этого пользователя во все необходимые базы данных (процедура sp_adduser ).</p><p>
Предоставить ему в каждой базе данных соответствующие привилегии (команда GRANT ) .</p><p>
Создание новой учетной записи может быть произведено с помощью системной хранимой процедуры:
</p><p>
sp_addlogin</p><p>
[@login=] 'учетная_запись'</p><p>
[, [@password=] 'пароль']</p><p>
[, [@defdb=] 'база_данных_по_умолчанию']</p><p>
После завершения аутентификации и получения идентификатора учетной записи (login ID) пользователь считается зарегистрированным, и ему предоставляется доступ к серверу. Для каждой базы данных, к объектам которой он намерен получить доступ, учетная запись пользователя (login) ассоциируется с пользователем (user) конкретной базы данных, что осуществляется посредством процедуры:
</p><p>
sp_adduser</p><p>
[@loginame=] 'учетная_запись'</p><p>
[, [@name_in_db=] 'имя_пользователя']</p><p>
[, [@grpname=] 'имя_роли']</p><p>
Отобразить учетную запись Windows NT в имя пользователя позволяет хранимая процедура:
</p><p>
sp_grantdbaccess</p><p>
[@login=] ‘учетная_запись’</p><p>
[, [@name_in_db=]‘имя_пользователя’]</p><p>
Пользователь, который создает объект в базе данных (таблицу, хранимую процедуру, просмотр), становится его владельцем. Владелец объекта (database object owner dbo) имеет все права доступа к созданному им объекту. Чтобы пользователь мог создать объект, владелец базы данных (dbo) должен предоставить ему соответствующие права. Полное имя создаваемого объекта включает в себя имя создавшего его пользователя .
</p><p>
Владелец объекта не имеет специального пароля или особых прав доступа. Он неявно имеет полный доступ, но должен явно предоставить доступ другим пользователям.
</p><p>
SQL Server позволяет передавать права владения от одного пользователя другому с помощью процедуры:
</p><p>

sp_changeobjectowner</p><p>

[@objname=] ‘имя_объекта’</p><p>

[@newowner=] ‘имя_владельца’</p><p>
Роль позволяет объединить в одну группу пользователей, выполняющих одинаковые функции.
</p><p>
В SQL Server реализовано два вида стандартных ролей: на уровне сервера и на уровне баз данных. При установке SQL Server создаются фиксированные роли сервера (например, sysadmin с правом выполнения любых функций SQL-сервера) и фиксированные роли базы данных (например, db_owner с правом полного доступа к базе данных или db_accessadmin с правом добавления и удаления пользователей ). Среди фиксированных ролей базы данных существует роль public, которая имеет специальное назначение, поскольку ее членами являются все пользователи, имеющие доступ к базе данных.
</p><p>
Можно включить любую учетную запись SQL Server (login) или учетную запись Windows NT в любую роль сервера.
</p><p>
Роли базы данных позволяют объединять пользователей в одну административную единицу и работать с ней как с обычным пользователем. Можно назначить права доступа к объектам базы данных для конкретной роли, при этом автоматически все члены этой роли наделяются одинаковыми правами.
</p><p>
В роль базы данных можно включить пользователей SQL Server, роли SQL Server, пользователей Windows NT.
</p><p>
Различные действия по отношению к роли осуществляются при помощи специальных процедур:</p>

<ul>
  <li> <p>создание новой роли:</p><p>
sp_addrole</p><p>
[@rolename=] 'имя_роли' </p><p>
[, [@ownername=] 'имя_владельца']</p></li>
<li> <p>добавление пользователя к роли:</p><p>
sp_addrolemember</p><p>
[@rolename=] 'имя_роли', </p><p>
[@membername=] 'имя_пользователя'</p>
</li>
<li><p>удаление пользователя из роли: </p><p>
sp_droprolemember </p><p>
[@rolename=] 'имя_роли',  </p><p>
[@membername=] 'имя_пользователя'</p>
</li>
<li><p>удаление роли: </p><p>
sp_droprole </p><p>
[@rolename=] 'имя_роли'</p>
</li>

</ul>
     </div>
     <nav role="navigation" aria-labelledby="book-label-2" class="book-navigation">
       <div class="page-links"><a href="book111.html" rel="prev" class="page-previous" title="Прошлая Тема">
         <i class="arrow icon-prev"><img src="images/arrowleft.png" alt=""></i>Тема 1.1</a>
         <a href="index.html" class="page-up" title="Содержание"><i class="arrow icon-up">
         <img src="images/arrowup.png" alt=""></i>Содержание</a>
         <a href="book113.html" rel="next" class="page-next" title="Следующая тема">Тема 1.3.
           <i class="arrow icon-next"><img src="images/arrowright.png" alt=""></i>
         </a>
       </div>
     </nav>
   </article>
 </div>
</div>
  </div>
</div>
<footer>
  <div class="footer">

  <div class="footer-inner">
    <div class="footer-ss">
     <div class="footer-name">
        <a href="https://nggtk.ru"> <p class="footer-name"><i class="arrow icon-up">
        <img src="images/icon1.png" alt=""></i>Сайт ГАПОУ НГТК</p> </a>
    <a href="https://vk.com/gapou_ngtk"> <p class="footer-name"><i class="arrow icon-up">
    <img src="images/icon2.png" alt=""></i>Группа ГАПОУ НГТК в ВК</p> </a>
     </div>

    </div>
    <div>
      <p>Создано Максяшкиным Валерием Валерьевичем <br>
      С помощью текстового редактора Atom</p>
    </div>
      <a href="#top"class="top">Back to top</a>
  </div>
</div>
</footer>

</body>

</html>
